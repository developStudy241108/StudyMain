# 1주차-프로젝트 아키텍처 구조 개선

# 구조 개선 방향

## 파이널 프로젝트 아키텍처

![프로젝트 아키텍처.png](1%E1%84%8C%E1%85%AE%E1%84%8E%E1%85%A1-%E1%84%91%E1%85%B3%E1%84%85%E1%85%A9%E1%84%8C%E1%85%A6%E1%86%A8%E1%84%90%E1%85%B3%20%E1%84%8B%E1%85%A1%E1%84%8F%E1%85%B5%E1%84%90%E1%85%A6%E1%86%A8%E1%84%8E%E1%85%A5%20%E1%84%80%E1%85%AE%E1%84%8C%E1%85%A9%20%E1%84%80%E1%85%A2%E1%84%89%E1%85%A5%E1%86%AB%201342348c645180f68093fd6677d38734/%25ED%2594%2584%25EB%25A1%259C%25EC%25A0%259D%25ED%258A%25B8_%25EC%2595%2584%25ED%2582%25A4%25ED%2585%258D%25EC%25B2%2598.png)

### 아쉬웠던 점

- AWS를 사용하지만 배포를 제대로 수행하지 않아 On-Premiss에서 웹서버 실행
- 교육과정에서 사용해본 Oracle을 DBMS로 사용했지만 라이선스가 VM환경에 부적합
- CI/CD 구축하고 싶었으나 기한 내에 프로젝트 구현이 먼저인것 같아 포기

### 개선 방향

- 프론트 서버는 Enginx, 백엔드 서버는 Tomcat으로 하여 각각 Docker의 컨테이너에 실행
- 비용을 고려해보고 DB를 AWS의 RDS서비스(MySQL) 로 마이그레이션
- 프론트/백엔드를 각각의 레포지토리로 쪼개고 Github Actions를 각각의 컨테이너에 구축

# Redis로 세션 관리

<aside>
💡

Redis는 웹 개발에서 매우 자주 사용되는 데이터베이스 중 하나입니다. 특히, 고속 데이터 처리가 필요한 상황이나 효율적인 캐싱 메커니즘을 구현할 때 많이 사용됩니다.

</aside>

### Redis 기반 세션 관리가 적합한 케이스

- **대규모 트래픽을 처리하는 웹 애플리케이션**: 여러 서버 간 세션 동기화가 필요한 환경에서 효율적입니다.
- **부하 분산이 필요한 분산 시스템**: 로드 밸런서를 사용하는 경우 Redis를 활용하면 유연한 세션 처리가 가능합니다.
- **실시간 데이터 요구사항이 있는 서비스**: 빠른 속도로 세션을 읽고 쓰는 서비스에 유리합니다.

### 세션관리를 Redis로 했을 경우의 장점

### 1. **확장성(Scalability)**

- **분산 환경 지원**: 웹 애플리케이션이 여러 대의 서버에서 실행되는 경우, 각 서버가 고유한 세션 데이터를 관리할 필요 없이 Redis에 세션 정보를 저장함으로써 모든 서버에서 세션에 접근할 수 있습니다. 이를 통해 로드 밸런싱과 서버 확장 시에도 일관성 있는 세션 관리를 보장할 수 있습니다.
- **세션 정보 공유**: 동일한 세션 정보에 여러 서버가 접근할 수 있기 때문에 사용자가 서버를 이동해도 세션이 유지됩니다. 이를 통해 높은 가용성을 가진 웹 애플리케이션을 구현할 수 있습니다.

### 2. **속도(Fast Access)**

- Redis는 메모리 기반의 데이터 저장소로, 세션 정보에 매우 빠르게 접근할 수 있습니다. 이는 사용자가 로그인하거나 세션을 유지할 때 지연 없이 빠른 응답을 제공하는 데 유리합니다.
- **실시간 세션 관리**: 빠른 읽기/쓰기 속도를 제공하기 때문에 실시간으로 세션 데이터를 관리할 수 있어, 응답 시간이 중요한 애플리케이션에서 유리합니다.

### 3. **세션 영속성 및 복구(High Availability and Persistence)**

- **데이터 복제 및 백업**: Redis는 데이터 복제 및 내구성(persistence) 옵션을 제공합니다. 이 기능을 사용하면 세션 데이터를 지속적으로 백업하고, 장애 발생 시 데이터 복구가 가능해집니다.
- **고가용성(High Availability)**: Redis 클러스터나 Redis Sentinel을 이용하면 세션 데이터의 고가용성을 보장할 수 있어, 서버 장애나 네트워크 이슈에 대비할 수 있습니다.

### 4. **세션 만료 관리(Automatic Session Expiration)**

- Redis는 TTL(Time To Live) 설정을 통해 세션 데이터가 일정 시간 이후 자동으로 삭제되도록 관리할 수 있습니다. 이를 통해 오래된 세션 데이터를 자동으로 정리하고, 메모리 사용을 효율적으로 관리할 수 있습니다.

### 5. **유연한 데이터 구조 지원(Flexible Data Structures)**

- Redis는 다양한 자료 구조(String, Hash, List 등)를 제공하여 세션 데이터를 효과적으로 저장하고 관리할 수 있습니다. 예를 들어, 사용자 정보는 Hash로 관리하고, 접속 기록은 List로 관리하는 등 다양한 방식으로 활용할 수 있습니다.

### 6. **보안(Security)**

- 세션 데이터가 웹 서버에 저장될 경우, 특정 서버가 해킹당하거나 손상되면 세션 정보가 위험에 노출될 수 있습니다. Redis를 사용하면 세션 데이터가 중앙 집중화되어 있으므로 관리와 보안 강화를 위한 전략을 쉽게 적용할 수 있습니다. 또한, Redis의 인증 및 암호화 설정을 통해 데이터를 더 안전하게 보호할 수 있습니다.

# Oracle의 VM 관련 라이선스 정책

[Oracle Database Licensing in a VMware Virtual Environment (Part 1 of 3)](https://www.flexera.com/blog/it-asset-management/oracle-database-licensing-in-a-vmware-virtual-environment-part-1-of-3-2/)

### Oracle의 DBMS 라이선스 정책 2가지

<aside>
💡

사용자를 계산하거나 식별할 수 없는 경우(예: 인터넷 애플리케이션) 또는 사용자 수가 매우 많아 Named User Plus 라이선스 비용이 너무 많이 드는 경우 Processor 라이선스를 사용해야 합니다. Processor 라이선스는 특히 가상화된 환경에 배포할 때 어려움이 거의 없습니다.

</aside>

- Named User Plus 라이선스 : 사용자 수에 따른 라이선스
- Processor 라이선스 : 데이터베이스를 지원하는 장치(서버)의 코어 수에 따른 라이선스

![image.png](1%E1%84%8C%E1%85%AE%E1%84%8E%E1%85%A1-%E1%84%91%E1%85%B3%E1%84%85%E1%85%A9%E1%84%8C%E1%85%A6%E1%86%A8%E1%84%90%E1%85%B3%20%E1%84%8B%E1%85%A1%E1%84%8F%E1%85%B5%E1%84%90%E1%85%A6%E1%86%A8%E1%84%8E%E1%85%A5%20%E1%84%80%E1%85%AE%E1%84%8C%E1%85%A9%20%E1%84%80%E1%85%A2%E1%84%89%E1%85%A5%E1%86%AB%201342348c645180f68093fd6677d38734/image.png)

### 코어 라이선스 사용 시 VM에서 일부 코어만 사용해도 전체 코어로 책정

- 가상 머신이 하드 파티션인 경우 필요한 Oracle 프로세서 라이선스 수는 다음과 같습니다. **2(가상 코어) x 0.5 = 1**
- 가상 머신이 소프트 파티션(예: VMware ESX)인 경우 필요한 Oracle 프로세서 라이선스 수는 다음과 같습니다. **2(프로세서) x 4(코어/프로세서) x 0.5(코어 계수) = 4**

## 결론

물리적 장치를 통째로 DB서버로 사용하는 경우가 아니면 라이선스 비용에서 불이익이다.

파이널 프로젝트에서 VM(EC2인스턴스)에 Oracle DBMS설치했던건 라이선스 비용을 봤을때 오히려 손해보는 방식!